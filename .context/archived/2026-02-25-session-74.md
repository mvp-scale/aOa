# Session 74 Archive | 2026-02-25

## Work Completed

### Dashboard QOL Enhancements (Live Tab)
1. **Context Remaining** -- flipped from "Context Util%" (used_pct) to "Context Remaining" (remaining_pct). Users think in terms of fuel left, not fuel burned.
2. **Cache Hit% -> Cache Savings $** -- replaced always-100% cache hit rate with dollar amount saved by prompt caching. Uses calcCacheSavings() with published API rates.
3. **Hero label changes** -- "cost saved" -> "est. cost saved", "extended" -> "+runway gained"
4. **Hero support line** -- now hides blank elements instead of showing empty values
5. **Output Speed (Debrief)** -- added client-side fallback: computes median tok/sec from conversation feed turns when server-side RateTracker has insufficient samples
6. **Debrief support line** -- now hides blank elements (same pattern as Live)

### Tooltips on All Stats Cards (All 5 Tabs)
- Added human-readable data-tooltip to every stats card across Live (6), Recon (5), Intel (6), Debrief (6), Arsenal (6) = 29 total tooltips
- CSS tooltip system: appears below card on hover, max-width 260px, styled to match theme
- Rule established: tooltips on stats cards only, never on hero metrics. Hero metrics must be self-explanatory.

### Context Snapshot Fix
- **Root cause**: .aoa/ directory was in fsnotify ignore list, so daemon never saw context.jsonl changes
- **Fix 1**: Added WatchExtra() method to fsnotify watcher -- allows explicitly watching directories that are normally ignored
- **Fix 2**: App.Start() now calls WatchExtra(a.Paths.HookDir) to watch .aoa/hook/
- **Fix 3**: App.Start() seeds context snapshot from existing file on startup (don't wait for next hook write)

### Recon Parallel Scan (3.5x speedup)
- Parallelized dimensional analysis scan in warmDimCache() with worker pool (NumCPU, max 8)
- Added sync.RWMutex to treesitter Parser for concurrent safety on language map
- Before: 6746 files in ~20 minutes (sequential). After: ~4 minutes (parallel)
- Results persist to bbolt, so subsequent restarts load from cache

### Design Decisions Established
- **Tooltip rule**: Stats cards get tooltips, hero metrics never do. If a hero metric needs explanation, it's the wrong metric for that slot.
- **Blank rule**: Hero support line hides blank elements. Hero metric cells always show (with "-" if no data). Stats cards can be blank.
- **Context framing**: Show "remaining %" not "used %" -- fuel gauge metaphor
- **Cache metric**: Dollar savings (variable, tangible) over hit rate (always 100%, useless)

## Previous CURRENT.md State

### Now
- Continue QOL dashboard walk-through (Intel, Debrief, Arsenal tabs)
- Address Live tab feedback items in .context/details/QOL.md

### Next (carried forward)
- L5.7/8/16-19: per-rule detection validation (Va gaps)
- L5.10/L5.11: dimension scores in search results + query support
- L8.1-4: remaining Va gaps (bitmask, browser-only, unit tests)
- L8.6: recon source line editor view
- L4.4: installation docs
- L7.1: startup progress timing test

## Still Open / Not Yet Addressed
- Intel tab hero metrics philosophy (velocity/coherence/KW->domain% -- "data upon data")
- Arsenal: R/P column undefined, daily savings chart compactness, waste column, inline bars
- Daemon restart reliability (stops aren't always clean)
- Output Speed on Live tab (needs server-side RateTracker to accumulate samples)
